--- 
wordpress_id: "240"
layout: post
title: while(*a++ == *b++)
wordpress_url: http://saicharan.in/blog/?p=240
---
Among the most elegant implementations is the string copy function (assuming you have allocated enough memory in the dest buffer):<pre class="brush: cpp">//Assuming for elegance you don't have to return the number of bytes copied.void strcpy(char* src, char* dest){while(*dest++ = *src++);}</pre>But I have often wondered what happens at the assembler such *s gets you only a single byte/character. So here is a simple program that explores this - but in string compare:<pre class="brush: cpp">int main(){    char *a="String One", *b="String Two";    while(*a++==*b++);return 0;}</pre>I compiled this with 'gcc -S' option and got the following assembly code:<pre class="brush: plain">        .file"testpointer.c".def___main;.scl2;.type32;.endef.section .rdata,"dr"LC0:.ascii "a\0"LC1:.ascii "b\0".text.globl _main.def_main;.scl2;.type32;.endef_main:pushl%ebpmovl%esp, %ebpandl$-16, %espsubl$16, %espcall___mainmovl$LC0, 8(%esp)movl$LC1, 12(%esp)L2:movl8(%esp), %eaxmovb(%eax), %dlmovl12(%esp), %eaxmovb(%eax), %alcmpb%al, %dlsete%alincl8(%esp)incl12(%esp)testb%al, %aljneL2movl$0, %eaxleaveret</pre>Line 24: "cmpb %al, %dl" says it all. compare **Lower** **Byte** of register 'a' and register 'd'. Now I can be in peace ;)References:[http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9415](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9415)[http://www3.itu.edu.tr/~kesgin/mul06/intel/instr/sete_setz.html](http://www3.itu.edu.tr/~kesgin/mul06/intel/instr/sete_setz.html)[http://homepage.mac.com/randyhyde/webster.cs.ucr.edu/www.artofasm.com/DOS/ch09/CH09-6.html#HEADING6-83](http://homepage.mac.com/randyhyde/webster.cs.ucr.edu/www.artofasm.com/DOS/ch09/CH09-6.html#HEADING6-83)
